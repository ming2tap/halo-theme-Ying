<!DOCTYPE html>
<html lang="en" th:fragment="html (title,content,head)">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title th:text="${#strings.defaultString(title, site.title)}"></title>
<link rel="stylesheet" th:href="${(theme.config.layout.web_font_set == 'manual' && !#strings.isEmpty(theme.config.layout.web_font)) ?  theme.config.layout.web_font :  (theme.config.layout.web_font_set == 'defaultfont') ? (theme.config.layout.header_cdn == 'cdn' ?  theme.config.layout.header_cdn_link + '/font/result.css' :  theme.config.layout.web_font_default) :  (theme.config.layout.web_font_set == 'MiSans') ? (theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.web_font_MiSans : theme.config.layout.web_font_MiSans) :  ''}" />
<link rel="stylesheet" th:href="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/css/output.css' : '/themes/theme-Ying/assets/css/output.css'}" />
<link rel="stylesheet" th:href="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/css/main.css' : '/themes/theme-Ying/assets/css/main.css'}" />
<link rel="stylesheet" th:href="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/css/remixicon.css' : '/themes/theme-Ying/assets/css/remixicon.css'}"/>
<link rel="stylesheet" th:href="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/css/nprogress.css' : '/themes/theme-Ying/assets/css/nprogress.css'}" />
<link rel="stylesheet" th:href="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/css/fancybox.css' : '/themes/theme-Ying/assets/css/fancybox.css'}" />
<script th:src="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/js/jquery.min.js' : '/themes/theme-Ying/assets/js/jquery.min.js'}"></script>
<script th:src="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/js/lazy/jquery.lazyload.min.js' : '/themes/theme-Ying/assets/js/lazy/jquery.lazyload.min.js'}"></script>
<script th:src="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/js/pjax/pjax.min.js' : '/themes/theme-Ying/assets/js/pjax/pjax.min.js'}"></script>
<script th:src="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/js/nprogress.js' : '/themes/theme-Ying/assets/js/nprogress.js'}"></script>
<script th:src="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/js/tocbot.js' : '/themes/theme-Ying/assets/js/tocbot.js'}"></script>
<script th:src="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/js/fancybox.umd.js' : '/themes/theme-Ying/assets/js/fancybox.umd.js'}"></script>
<script th:src="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/js/cdn.min.js' : '/themes/theme-Ying/assets/js/cdn.min.js'}" defer></script>
<script th:src="${theme.config.layout.header_cdn == 'cdn' ? theme.config.layout.header_cdn_link + '/js/smooth.min.js' : '/themes/theme-Ying/assets/js/smooth.min.js'}" defer></script>
<th:block th:if="${head != null}"><th:block th:replace="${head}"/></th:block>
<style th:inline="text">body {vertical-align: sub;font-weight: 400;font-display: swap; font-family: [(${theme.config.layout.web_font_set == 'MiSans' ? "'MiSans VF'" :(theme.config.layout.web_font_set == 'defaultfont' ? "'ZouLDFXKAJ'" : (theme.config.layout.web_font_set == 'manual' && !#strings.isEmpty(theme.config.layout.web_font) ?  "'"+theme.config.layout.web_font_name+"'" :  "'sans-serif'"))})]}code, pre{font-weight: 400;font-display: swap; font-family: [(${theme.config.layout.web_font_set == 'MiSans' ? "'MiSans VF'" :(theme.config.layout.web_font_set == 'defaultfont' ? "'ZouLDFXKAJ'" : (theme.config.layout.web_font_set == 'manual' && !#strings.isEmpty(theme.config.layout.web_font) ?  "'"+theme.config.layout.web_font_name+"'" :  "'sans-serif'"))})]}</style>
</head>
<body th:style="${theme.config.layout.header_background_type == 'manual' ? 'background-color: ' + theme.config.layout.header_background : (theme.config.layout.header_background_type == 'image' ? 'background-image: url(' + theme.config.layout.header_background_image + '); background-size: cover; background-attachment: fixed;' : 'background-image: url(/themes/theme-Ying/assets/images/texture.png); background-repeat: repeat; background-color: ' + theme.config.layout.header_background_style1)}" class=" bg-gray-100 flex dark:!bg-gray-800/80 dark:text-gray-200  page-container">
<div th:replace="~{modules/nav}"></div>
<button  aria-label="返回顶部" id="back-to-top" class="zindex fixed bottom-4 right-4 w-12 h-12 bg-blue-500 text-white rounded-full shadow-lg transition-opacity duration-300 hover:bg-blue-600 flex items-center justify-center opacity-0 pointer-events-none"><i class="ri-arrow-up-s-line text-xl"></i></button>
<div id="pjax-content" class="action"><th:block th:replace="${content}" /></div>
<div th:replace="~{modules/footer}"></div>
<script>(function(){const highlightJSPath="/themes/theme-Ying/assets/js/hight/highlight.min.js";const copyPluginPath="/themes/theme-Ying/assets/js/hight/plugins/highlightjs-copy.js";const cssPath="/themes/theme-Ying/assets/js/hight/styles/atom-one-dark.min.css";const overrideCSSPath="/themes/theme-Ying/assets/js/hight/plugins/override.css";const copyCSSPath="/themes/theme-Ying/assets/js/hight/plugins/highlightjs-copy.css";let isHighlightJSLoaded=false;let isCopyPluginLoaded=false;function postTOC(){if(typeof tocbot!=="undefined"&&document.querySelector(".toc")){tocbot.init({tocSelector:".toc",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5, h6",collapseDepth:2,scrollSmooth:true,scrollSmoothDuration:600,scrollSmoothOffset:-80,headingsOffset:80,hasInnerContainers:true,})}}function formatPostTimes(){document.querySelectorAll(".time,.ex-time").forEach((timeElement)=>{const date=new Date(timeElement.getAttribute("data-date"));const options={year:"numeric",month:"long",day:"numeric"};timeElement.textContent=date.toLocaleDateString("en-US",options)})}function updateFooterYear(){const currentYear=new Date().getFullYear();document.getElementById("currentYear").textContent=currentYear}function initLazyLoad(){jQuery("img.lazyload").each(function(){if(this.complete){this.style.opacity=1}}).lazyload({effect:"fadeIn",threshold:0.5,failure_limit:200})}function initializeFancybox(selectors=[".photos-content",".post-content",".moment-content"]){selectors.forEach((selector)=>{document.querySelectorAll(selector).forEach((container)=>{container.querySelectorAll("img, video").forEach((media)=>{media.setAttribute("data-fancybox","gallery");media.dataset.src=media.dataset.src||media.src;media.dataset.caption=media.dataset.caption||media.alt||""})})});Fancybox.bind("[data-fancybox]",{animated:true,showClass:"fancybox-zoomIn",hideClass:"fancybox-zoomOut",dragToClose:true,closeButton:"inside",Image:{zoom:true},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW"],right:["slideshow","thumbs","close"],},},Hash:false,})}function loadHighlightJS(pjaxContent,immediate=false){if(!pjaxContent.querySelector(`link[href="${cssPath}"]`)){const atomOneDarkLink=document.createElement("link");atomOneDarkLink.href=cssPath;atomOneDarkLink.rel="stylesheet";pjaxContent.appendChild(atomOneDarkLink)}if(!pjaxContent.querySelector(`link[href="${overrideCSSPath}"]`)){const overrideLink=document.createElement("link");overrideLink.href=overrideCSSPath;overrideLink.rel="stylesheet";pjaxContent.appendChild(overrideLink)}if(!pjaxContent.querySelector(`link[href="${copyCSSPath}"]`)){const copyCSSLink=document.createElement("link");copyCSSLink.href=copyCSSPath;copyCSSLink.rel="stylesheet";pjaxContent.appendChild(copyCSSLink)}if(!pjaxContent.querySelector(`script[src="${highlightJSPath}"]`)){const jsScript=document.createElement("script");jsScript.src=highlightJSPath;jsScript.defer=true;jsScript.onload=()=>{isHighlightJSLoaded=true;if(immediate&&typeof hljs!=="undefined"){highlightCodeBlocks()}};pjaxContent.appendChild(jsScript)}else if(immediate&&typeof hljs!=="undefined"){highlightCodeBlocks()}if(!isCopyPluginLoaded&&!document.querySelector(`script[src="${copyPluginPath}"]`)){const copyScript=document.createElement("script");copyScript.src=copyPluginPath;copyScript.defer=true;copyScript.onload=()=>{isCopyPluginLoaded=true};document.body.appendChild(copyScript)}}function highlightCodeBlocks(){if(typeof hljs==="undefined")return;document.querySelectorAll("pre code").forEach((el)=>{if(!el.classList.contains("hljs")){hljs.highlightElement(el)}})}function unloadHighlightJS(pjaxContent){pjaxContent.querySelectorAll(`link[href="${cssPath}"],link[href="${overrideCSSPath}"],link[href="${copyCSSPath}"],script[src="${highlightJSPath}"],script[src="${copyPluginPath}"]`).forEach(node=>node.remove());isHighlightJSLoaded=false;isCopyPluginLoaded=false}function initializePageFeatures(pjaxContent){try{initLazyLoad();updateFooterYear();formatPostTimes();initializeFancybox();if(document.querySelector(".toc")){postTOC()}const postContentExists=pjaxContent.querySelector(".post-content");if(postContentExists){loadHighlightJS(pjaxContent,true)}else{unloadHighlightJS(pjaxContent)}}catch(error){console.error("Error initializing page features:",error)}}function setupPjax(){const pjax=new Pjax({selectors:["#pjax-content","title"],cacheBust:false,elements:"a",});document.addEventListener("pjax:send",function(){NProgress.configure({showSpinner:false});NProgress.start()});document.addEventListener("pjax:complete",function(){NProgress.done();const pjaxContent=document.querySelector("#pjax-content");initializeFancybox();initializePageFeatures(pjaxContent);initializeComments()});document.addEventListener("pjax:success",function(){const pjaxContent=document.querySelector("#pjax-content");initializePageFeatures(pjaxContent);initializeComments()})}function initializeComments(){const commentElement=document.querySelector("#comment");if(commentElement){const scriptElements=commentElement.querySelectorAll("script");scriptElements.forEach(script=>{const newScript=document.createElement("script");if(script.type){newScript.type=script.type}if(script.src){newScript.src=script.src}newScript.innerHTML=script.innerHTML;commentElement.appendChild(newScript);script.remove()});if(typeof window.initializeHaloComment !== 'undefined'){window.initializeHaloComment()}}}$(document).ready(function(){const pjaxContent=document.querySelector("#pjax-content");initializePageFeatures(pjaxContent);setupPjax()});document.addEventListener("DOMContentLoaded",()=>{const backToTopButton=document.getElementById("back-to-top");if(backToTopButton){window.addEventListener("scroll",()=>{const isVisible=window.scrollY>300;backToTopButton.classList.toggle("opacity-0",!isVisible);backToTopButton.classList.toggle("pointer-events-none",!isVisible);backToTopButton.classList.toggle("opacity-100",isVisible);backToTopButton.classList.toggle("pointer-events-auto",isVisible)});backToTopButton.addEventListener("click",(event)=>{event.preventDefault();$("html, body").animate({scrollTop:0},600)})}const toggle=document.getElementById("toggle-dark-mode");if(toggle){const icon=toggle.querySelector("i");if(icon){const isDarkMode=localStorage.getItem("darkMode")==="true";document.documentElement.classList.toggle("dark",isDarkMode);icon.className=isDarkMode?"ri-sun-line":"ri-moon-line";toggle.addEventListener("click",()=>{const isDark=document.documentElement.classList.toggle("dark");localStorage.setItem("darkMode",isDark);icon.className=isDark?"ri-sun-line":"ri-moon-line"})}}const menuBtn=document.getElementById("menu-btn");const closeMenuBtn=document.getElementById("close-menu");const mainMenu=document.getElementById("main-menu");if(menuBtn){menuBtn.addEventListener("click",function(){if(mainMenu){mainMenu.classList.add("active")}})}if(closeMenuBtn){closeMenuBtn.addEventListener("click",function(){if(mainMenu){mainMenu.classList.remove("active")}})}if(mainMenu){document.addEventListener("click",function(event){const isClickInsideMenu=mainMenu.contains(event.target);const isClickOnMenuButton=menuBtn&&menuBtn.contains(event.target);if(!isClickInsideMenu&&!isClickOnMenuButton){mainMenu.classList.remove("active")}});mainMenu.addEventListener("click",function(event){const target=event.target;if(target.tagName.toLowerCase()==="a"){setTimeout(()=>{if(mainMenu.classList.contains("active")){mainMenu.classList.remove("active")}event.preventDefault()},100)}})}})})();</script>
</body>
</html>
